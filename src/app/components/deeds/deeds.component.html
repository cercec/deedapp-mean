<app-navbar></app-navbar>
<app-note></app-note>
<div class="d-flex flex-column actions">
  <a mat-fab matTooltip="Download the database" class="mb-2 download-button" matTooltipPosition="before" matTooltipClass="'tooltip'"
    [href]="downloadUri" [download]="downloadName" (click)="updateDate()">
    <mat-icon class="md-dark">archive</mat-icon>
  </a>
</div>
<div class="container main-container">
  <div class="card shadow mb-3">
    <div class="card-body">
      <div class="text-center">
        <h3>
          <i class="fa fa-list"></i> All Deeds</h3>
        <hr class="mt-2 mb-2">
      </div>
      <mat-table #table [dataSource]="dataSource" matSort>
        <!-- Position Column -->
        <ng-container matColumnDef="deedCode">
          <mat-header-cell *matHeaderCellDef mat-sort-header> code </mat-header-cell>
          <mat-cell *matCellDef="let deed"> {{deed.deedCode}} </mat-cell>
        </ng-container>
        <!-- Name Column -->
        <ng-container matColumnDef="deedRef">
          <mat-header-cell *matHeaderCellDef mat-sort-header> ref </mat-header-cell>
          <mat-cell *matCellDef="let deed"> {{deed.deedRef}} </mat-cell>
        </ng-container>
        <!-- Position Column -->
        <ng-container matColumnDef="deedDate">
          <mat-header-cell *matHeaderCellDef mat-sort-header> date </mat-header-cell>
          <mat-cell *matCellDef="let deed">
            <span *ngIf="deed.deedDate.day">{{deed.deedDate.day}}-</span>
            <span *ngIf="deed.deedDate.month">{{deed.deedDate.month}}-</span>
            <span *ngIf="deed.deedDate.year">{{deed.deedDate.year}}</span>
          </mat-cell>
        </ng-container>
        <!-- Name Column -->
        <ng-container matColumnDef="deedName">
          <mat-header-cell *matHeaderCellDef mat-sort-header> name </mat-header-cell>
          <mat-cell *matCellDef="let deed"> {{deed.deedName}} </mat-cell>
        </ng-container>
        <ng-container matColumnDef="complete">
          <mat-header-cell *matHeaderCellDef> complete </mat-header-cell>
          <mat-cell *matCellDef="let deed">
            <mat-icon *ngIf="deed.complete === true" class="mat-24">check</mat-icon>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="details">
          <mat-header-cell *matHeaderCellDef> </mat-header-cell>
          <mat-cell *matCellDef="let deed">
            <a mat-raised-button color="primary" routerLink="/deed/{{ deed._id }}">Details</a>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>

      <mat-paginator #paginator [length]="length" [pageIndex]="0" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]">
      </mat-paginator>
    </div>
  </div>
</div>